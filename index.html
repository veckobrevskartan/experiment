<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Svensk OSINT – Presentation</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <img src="svensk-osint-logga.png" alt="Svensk OSINT logga" class="logo" />
      <div>
        <h1>Svensk OSINT</h1>
        <div class="subtitle">Hotanalys • Underrättelsecykeln • Indikatorer • Visualisering</div>
      </div>
    </div>
  </header>

  <main class="wrap">

    <!-- ÖVERSIKT -->
    <section class="card" id="overview">
      <div class="card-head">
        <div>
          <h2>Översikt</h2>
          <p class="muted">Snabb bild av dataset och upplägg.</p>
        </div>
        <div class="actions">
          <button class="btn" type="button" data-expand="#overview">Expandera</button>
        </div>
      </div>

      <div class="grid2">
        <div class="box">
          <div class="box-title">Nyckeltal</div>
          <div class="kpis" id="kpis"></div>
          <div class="note" id="dataRange"></div>
        </div>

        <div class="box">
          <div class="box-title">Volym över tid (total + kategorier)</div>

          <div class="toolbar" style="margin-top:8px;">
            <button class="btn" type="button" id="selAllCats">Markera alla</button>
            <button class="btn" type="button" id="selNoCats">Avmarkera alla</button>
            <span class="pill muted">Klicka på kategorierna för att visa/dölja linjer</span>
          </div>

          <div id="sparkLegend" class="chips" aria-label="Kategorier (legend)"></div>
          <canvas id="sparkMulti" class="canvas" height="260"></canvas>

          <div class="note">Totalen visas alltid. Kategorilinjer kan slås av/på.</div>
        </div>
      </div>
    </section>

    <!-- UNDERRÄTTELSECYKELN -->
    <section class="card" id="cycle">
      <div class="card-head">
        <div>
          <h2>Underrättelsecykeln</h2>
          <p class="muted">Inriktning → Planering → Inhämtning → Bearbetning → Analys → Delgivning → Feedback</p>
        </div>
        <div class="actions">
          <button class="btn" type="button" data-expand="#cycle">Expandera</button>
        </div>
      </div>

      <div class="grid2">
        <div class="box">
          <div class="box-title">Steg (kort)</div>
          <ul class="list">
            <li><b>Inriktning</b>: definiera frågor, mål och prioriteringar.</li>
            <li><b>Planering</b>: metod, källor, ansvar, tidslinje.</li>
            <li><b>Inhämtning</b>: systematiskt samla data.</li>
            <li><b>Bearbetning</b>: strukturera, normalisera, validera.</li>
            <li><b>Analys</b>: hypotesdrivet, indikatorer, alternativa förklaringar.</li>
            <li><b>Delgivning</b>: rätt format till rätt mottagare.</li>
            <li><b>Feedback</b>: förbättra inriktning och indikatorlista.</li>
          </ul>
        </div>

        <div class="box">
          <div class="box-title">Illustration</div>
          <svg class="svg" viewBox="0 0 900 420" role="img" aria-label="Underrättelsecykeln">
            <rect x="0" y="0" width="900" height="420" rx="18" fill="rgba(15,23,42,0.04)"/>
            <text x="40" y="70" font-size="22" font-weight="700" fill="#0f172a">Underrättelsecykeln</text>
            <text x="40" y="98" font-size="13" fill="#475569">Iterativ process: delgivning och feedback återförs till ny inriktning.</text>

            <g transform="translate(450,240)">
              <circle r="140" fill="white" stroke="#e5e7eb" stroke-width="2"/>
              <circle r="78" fill="rgba(15,23,42,0.03)" stroke="#e5e7eb" stroke-width="2"/>
              <text x="0" y="-6" text-anchor="middle" font-size="18" font-weight="700" fill="#0f172a">Analysarbete</text>
              <text x="0" y="16" text-anchor="middle" font-size="12" fill="#475569">spårbart • iterativt</text>
            </g>
          </svg>
        </div>
      </div>
    </section>

    <!-- OIAT -->
    <section class="card" id="oiat">
      <div class="card-head">
        <div>
          <h2>OIAT – kvalitetskriterier</h2>
          <p class="muted">Objektivitet • Integritet • Aktualitet • Täckning</p>
        </div>
        <div class="actions">
          <button class="btn" type="button" data-expand="#oiat">Expandera</button>
        </div>
      </div>

      <div class="grid2">
        <div class="box">
          <div class="box-title">Reglage + modellbild</div>

          <div class="sliders">
            <label>Objektivitet <span id="vO">4</span><input id="sO" type="range" min="0" max="5" value="4"></label>
            <label>Integritet <span id="vI">4</span><input id="sI" type="range" min="0" max="5" value="4"></label>
            <label>Aktualitet <span id="vA">3</span><input id="sA" type="range" min="0" max="5" value="3"></label>
            <label>Täckning <span id="vT">3</span><input id="sT" type="range" min="0" max="5" value="3"></label>
          </div>

          <div class="note" style="margin-top:8px;">
            <b>Uträknat värde:</b> <span id="oiatScoreInline">–</span>/5 • <span id="oiatRagInline">–</span>
          </div>

          <div style="margin-top:12px;">
            <div class="box-title" style="margin-bottom:8px;">OIAT-modellen</div>

            <div class="oiat-figure">
              <button class="btn btn-full" type="button" id="oiatFullBtn">Visa helskärm</button>
              <img
                id="oiatImg"
                src="oiat-modellen.png"
                alt="OIAT-modellen"
                style="width:100%; height:auto; display:block; border-radius:12px; border:1px solid var(--line); background:#fff;"
              />
            </div>

            <div class="note" style="margin-top:8px;">
              Filnamn måste matcha exakt: <b>oiat-modellen.png</b> (GitHub Pages är skiftlägeskänsligt).
            </div>
          </div>
        </div>

        <div class="box">
          <div class="box-title">Förklaring + mätresultat</div>

          <p class="muted" style="margin-top:0;">
            OIAT är ett snabbt kvalitetsfilter för informationsunderlag: hur objektivt, äkta, aktuellt och heltäckande det är.
          </p>

          <div class="kpis" style="margin-top:10px;">
            <div class="kpi"><div class="n" id="oiatScore">–</div><div class="l">OIAT score (0–5)</div></div>
            <div class="kpi"><div class="n" id="oiatRag">–</div><div class="l">RAG</div></div>
            <div class="kpi"><div class="n" id="catsUsed">–</div><div class="l">Kategorier i data</div></div>
            <div class="kpi"><div class="n" id="eventsTotal">–</div><div class="l">Händelser</div></div>
          </div>

          <div class="note" style="margin-top:10px;">
            RAG-trösklar: <b>&lt; 2.5</b> = RÖD, <b>2.5–3.49</b> = GUL, <b>≥ 3.5</b> = GRÖN.
          </div>
        </div>
      </div>
    </section>

    <!-- KINDS OF KNOWNS -->
    <section class="card" id="known">
      <div class="card-head">
        <div>
          <h2>Kind och okända</h2>
          <p class="muted">Known knowns • Known unknowns • Unknown knowns • Unknown unknowns</p>
        </div>
        <div class="actions">
          <button class="btn" type="button" data-expand="#known">Expandera</button>
        </div>
      </div>

      <div class="grid2">
        <div class="box">
          <div class="box-title">Tolkning</div>
          <ul class="list">
            <li><b>Known knowns</b>: det vi vet och kan styrka.</li>
            <li><b>Known unknowns</b>: luckor där vi kan rikta inhämtning.</li>
            <li><b>Unknown knowns</b>: sådant vi “har” men inte ser (silos).</li>
            <li><b>Unknown unknowns</b>: överraskningar – scenarier och resiliens.</li>
          </ul>
        </div>

        <div class="box">
          <div class="box-title">Matrix</div>
          <p class="muted" style="margin:0;">(Här kan du lägga in din matrisbild senare om du vill.)</p>
        </div>
      </div>
    </section>

    <!-- INTERAKTIVA GRAFER -->
    <section class="card" id="charts">
      <div class="card-head">
        <div>
          <h2>Interaktiva grafer</h2>
          <p class="muted">Byggda direkt på datasetet (utan externa bibliotek).</p>
        </div>
        <div class="actions">
          <button class="btn" type="button" data-expand="#charts">Expandera</button>
        </div>
      </div>

      <div class="toolbar">
        <label class="pill">Topplista:
          <select id="geoMode">
            <option value="country">Land</option>
            <option value="place">Plats</option>
          </select>
        </label>
        <span class="pill muted">Klicka kategorierna nedan för att filtrera.</span>
      </div>

      <div id="catChips" class="chips" aria-label="Kategorifilter"></div>

      <div class="grid2">
        <div class="box">
          <div class="box-title">Fördelning per kategori</div>
          <canvas id="catChart" class="canvas" height="320"></canvas>
        </div>
        <div class="box">
          <div class="box-title">Volym över tid (månad)</div>
          <canvas id="timeChart" class="canvas" height="320"></canvas>
        </div>
      </div>

      <div class="grid2">
        <div class="box">
          <div class="box-title">Heatmap (kategori × månad)</div>
          <canvas id="heatChart" class="canvas" height="360"></canvas>
        </div>
        <div class="box">
          <div class="box-title">Topplista (land/plats)</div>
          <canvas id="geoChart" class="canvas" height="360"></canvas>
        </div>
      </div>

      <div class="note">Filtreringen påverkar alla grafer i den här sektionen.</div>
    </section>

    <!-- KARTA (IFRAME) -->
    <section class="card" id="map">
      <div class="card-head">
        <div>
          <h2>Karta – Veckobrevskartan</h2>
          <p class="muted">Inbäddad interaktiv karta.</p>
        </div>
        <div class="actions">
          <button class="btn" type="button" data-expand="#map">Expandera</button>
          <a class="btn" href="https://veckobrevskartan.github.io/veckobrevskartan/" target="_blank" rel="noopener">Öppna i ny flik</a>
        </div>
      </div>

      <div class="frame">
        <iframe
          title="Veckobrevskartan"
          src="https://veckobrevskartan.github.io/veckobrevskartan/"
          loading="lazy"
          allow="fullscreen"
        ></iframe>
      </div>
    </section>

    <footer class="footer">
      <span>© Svensk OSINT</span>
      <span class="muted">VERSION: 2026-01-09</span>
    </footer>

  </main>

  <!-- Lightbox för OIAT-bilden -->
  <div class="lightbox" id="oiatLightbox" aria-hidden="true">
    <div class="panel" role="dialog" aria-modal="true" aria-label="OIAT-modellen">
      <div class="panel-head">
        <strong>OIAT-modellen</strong>
        <button class="btn" type="button" id="oiatCloseBtn">Stäng</button>
      </div>
      <div class="panel-body">
        <img id="oiatLightboxImg" src="oiat-modellen.png" alt="OIAT-modellen i helskärm" />
      </div>
    </div>
  </div>

  <!-- Script: data först, sedan charts -->
  <script src="data.js"></script>
  <script src="charts.js"></script>
</body>
</html>
